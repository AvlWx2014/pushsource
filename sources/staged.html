
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Source: staged &#8212; pushsource  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Source: koji" href="koji.html" />
    <link rel="prev" title="User Guide" href="../userguide.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="source-staged">
<h1>Source: staged<a class="headerlink" href="#source-staged" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">staged</span></code> push source allows the loading of content from any locally accessible
directory referred to as the staging area. Content types and destinations are defined
by the directory structure in the staging area, and additional metadata for content
can be provided in a YAML or JSON file.</p>
<p>Supported content types:</p>
<ul class="simple">
<li><p>RPMs</p></li>
<li><p>Advisories</p></li>
<li><p>Generic files</p></li>
<li><p>Channel dump ISOs (for RHN Classic)</p></li>
<li><p>Amazon Machine Images (AMIs)</p></li>
<li><p>comps.xml files (yum repo metadata)</p></li>
<li><p>modulemd YAML streams (yum repo metadata)</p></li>
<li><p>productid files (yum repo metadata)</p></li>
</ul>
<div class="section" id="staged-source-urls">
<h2>Staged source URLs<a class="headerlink" href="#staged-source-urls" title="Permalink to this headline">¶</a></h2>
<p>A <cite>staged</cite> source is obtained by URL:</p>
<p><code class="docutils literal notranslate"><span class="pre">staged:stagedir1[,stagedir2[,stagedir3[,...]]]</span></code></p>
<p>One or more staging directories must be provided (usually, exactly one).
Each staging directory must use the <a class="reference internal" href="#staging-structure"><span class="std std-ref">Staging structure</span></a> defined below.</p>
<p>Here are some examples of <cite>staged</cite> source URLs:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">staged:/mnt/volume/my-staging-area</span></code> - a single staging directory</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">staged:/mnt/shared/stage1,/mnt/shared/stage2</span></code> - two staging directories</p></li>
</ul>
</div>
<div class="section" id="staging-structure">
<span id="id1"></span><h2>Staging structure<a class="headerlink" href="#staging-structure" title="Permalink to this headline">¶</a></h2>
<p>(to be documented!)</p>
</div>
<div class="section" id="python-api-reference">
<h2>Python API reference<a class="headerlink" href="#python-api-reference" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="pushsource.StagedSource">
<em class="property">class </em><code class="sig-prename descclassname">pushsource.</code><code class="sig-name descname">StagedSource</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">url</span></em>, <em class="sig-param"><span class="n">threads</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">timeout</span><span class="o">=</span><span class="default_value">3600</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pushsource/_impl/backend/staged/staged_source.html#StagedSource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pushsource.StagedSource" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses a directory with a predefined layout (a “staging directory”) as
the source of push items.</p>
<p>Create a new source.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>]</em>) – <p>URL(s) of locally accessible staging directories, e.g.
<code class="docutils literal notranslate"><span class="pre">&quot;/mnt/staging/my-content-for-push&quot;</span></code>.</p>
<p>These directories must follow the documented layout for staging areas.</p>
</p></li>
<li><p><strong>threads</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Number of threads used for concurrent loading of files.</p></li>
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Number of seconds after which an error is raised, if no progress is
made during each step.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">pushsource</a></h1>



<p class="blurb">A library to load push items from a variety of sources</p>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../userguide.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Source: staged</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#staged-source-urls">Staged source URLs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#staging-structure">Staging structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#python-api-reference">Python API reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="koji.html">Source: koji</a></li>
<li class="toctree-l1"><a class="reference internal" href="errata.html">Source: errata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model/base.html">Push items</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model/files.html">Push items: file</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model/rpm.html">Push items: RPM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model/modulemd.html">Push items: modulemd</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model/errata.html">Push items: errata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model/ami.html">Push items: AMI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model/productid.html">Push items: productid</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model/comps.html">Push items: comps.xml</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model/channeldumps.html">Push items: channel dump</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://github.com/release-engineering/pushsource">Source</a></li>
    
    <li class="toctree-l1"><a href="https://pypi.org/project/pushsource">PyPI</a></li>
    
    <li class="toctree-l1"><a href="genindex.html">Index</a></li>
    
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../userguide.html" title="previous chapter">User Guide</a></li>
      <li>Next: <a href="koji.html" title="next chapter">Source: koji</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Red Hat.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.0.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/sources/staged.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/release-engineering/pushsource" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>